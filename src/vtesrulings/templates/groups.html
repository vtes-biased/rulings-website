{% extends "layout.html" %}

{% block scripts %}
<script async src="{{ url_for('static', filename='dist/js/groups.js') }}" type="module"></script>
{% endblock%}

{% block content %}
<div class="row my-2">
    {% if current %}
    <div class="col list-group" id="groupDisplay" data-uid="{{ current.uid }}">
        <h2 id="groupName">{{ current.name }}</h2>
        {% for card in current.cards %}
        <a href="index.html?uid={{ card.uid }}"
            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            data-uid="{{ card.uid }}">
            <div class="krcg-card" data-noclick="true">{{ card.name }}</div>
            <span class="krcg-icon">
                {% for symbol in card.symbols %}
                {{ symbol["symbol"] }}
                {% endfor %}
            </span>
        </a>
        {% endfor %}
        <h3 class="my-2">Rulings</h3>
        {% if current.rulings %}
        <div id="rulingsList">
            {% for ruling in current.rulings %}
            <div class="card my-1 krcg-ruling" data-source="{{current.uid}}" data-ruling='{{ruling | tojson}}'>
                <!-- Content added by JS -->
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div id="rulingsList">No Ruling.</div>
        {% endif %}
    </div>
    {% else %}
    <div class="col"></div>
    {% endif %}
    <div class="col list-group" id="groupsList">
        {% for group in groups %}
        {% if current and group.uid == current.uid %}
        <a href="?uid={{ group.uid }}"
            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center active"
            data-uid="{{ group.uid }}">
            {{ group.name }}
            <span class="badge text-bg-primary rounded-pill">{{ group.cards | length}}</span>
        </a>
        {% else %}
        <a href="?uid={{ group.uid }}"
            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            data-uid="{{ group.uid }}">
            {{ group.name }}
            <span class="badge text-bg-primary rounded-pill">{{ group.cards | length}}</span>
        </a>
        {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}